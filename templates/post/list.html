{% extends 'post/base_post.html'%}

{% load static %}

{% block title %}Posts {{article.title}}{% endblock title %}

{% block content %}

    {% include 'includes/header.html' %}

    <div class="container" id="content">
        <h1>Posts</h1>

        <div class="row">
            <div class="col-12 col-sm-12 col-lg-8 mb-2">
                <form class="d-flex" method="GET">
                    {% csrf_token %}
                    <input class="form-control me-2" type="search" name="kword" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                  </form>
            </div>
        </div>

        <div class="row">
            <div class="col-12 col-sm-12 col-lg-8">
                
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    {% for post in posts %}
                        <div class="col">
                            <div class="card" style="height: 100%;">
                                <img src="{{post.image.url}}" class="card-img-top" alt="{{post.title}}">
                                <div class="card-body">
                                    <h5 class="card-title">{{post.title}}</h5>
                                    
                                    <ul class="list-group list-group-horizontal">
                                        {% for t in post.tag.all %}
                                            <li class="tags list-group-item rounded-pill ">{{t.tag|truncatechars:17}}</li>
                                        {%endfor%}
                                    </ul>

                                    <p class="card-text text-muted">{{post.content|truncatewords_html:20|safe}}</p>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="{% url 'post_app:detail' post.slug %}" class="btn btn-primary">Read more</a>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <div class="col">
                            <div class="text-center mt-5" style="width: 150%;">

                                <h5 class="text-warning">Nothing to see</h5>
                                <p class="card-text text-muted">Sorry!</p>
                            </div>
                        </div>
                    {% endfor%}
                </div>                

            </div>
        
            <div class="col-12 col-sm-12 col-lg-4">
                <div class="card">
                    <div class="card-body">
                    <h5 class="card-title">Categories</h5>
                    <ul>
                        <li><a href="{% url 'post_app:list'%}">All</a></li>
                        {% for category in categories %}
                            <li><a href="?category={{category.name}}">{{category.name}}</a></li>
                        {%endfor%}
                    </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- paginator -->

        <!-- <div class="row pt-4">
            {% if not page_obj %}
                <p>No Existe paginacion</p>
            {% endif %}
            <div class='col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2'></div>
            <div class='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8'>
                <nav aria-label="pagination">
                    <ul class="pagination pagination-sm justify-content-center">
                        {% if page_obj.has_previous %}
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="?page=1" tabindex="-1">&laquo;</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="?page={{page_obj.previous_page_number}}" tabindex="-1">Anterior</a>
                            </li>
                        {% elif page_obj.number == 1  %}
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="" tabindex="-1">&laquo;</a>
                            </li>
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="" tabindex="-1">Anterior</a>
                            </li>
                        {%endif%}
        
                        <li class="page-item active">
                            <a class="page-link navbar-dark">{{page_obj.number}} de {{page_obj.paginator.num_pages}}<span class="sr-only"></span></a>
                        </li>
        
                        {% if page_obj.has_next %}
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href='?page={{page_obj.next_page_number}}'> Siguiente</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href='?page={{page_obj.paginator.num_pages}}'>&raquo;</a>
                            </li>
                        {% elif not page_obj.has_next %}
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href=''> Siguiente</a>
                            </li>
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href=''>&raquo;</a>
                            </li>
                        {%endif%}
        
        
                    </ul>
                </nav>
            </div>
            <div class='col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2'></div>
        </div> -->
    </div>
    
    

    {% include 'includes/footer.html' %}

{% endblock content %}