{% extends 'favorites/base_favorites.html'%}

{% load static %}

{% block content %}

    {% include 'includes/header.html' %}

    <div class="container">
        <h1>{{user.names|capfirst}}'s favorites list</h1>

        <div class="row">
            <div class="col-8 mb-2">
                <form class="d-flex" method="GET">
                    {% csrf_token %}
                    <input class="form-control me-2" type="search" name="kword" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                  </form>
            </div>
        </div>

        <div class="row">
            
            <div class="col-8">
                
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    {% for post in favorite_items %}
                        <div class="col">
                            <div class="card" style="height: 100%;">
                            <img src="{{post.article.image.url}}" class="card-img-top" alt="{{post.article.title}}">
                                <div class="card-body">
                                    <h5 class="card-title">{{post.article.title}}</h5>
                                    <p class="card-text text-muted">{{post.article.content|truncatewords_html:20|safe}}</p>
                                </div>
                                <form method="POST" action="{% url 'favorites_app:favoriteRemove' post.id %}">
                                    {% csrf_token %}
                                    <div class="card-footer text-center">
                                        <a href="{% url 'post_app:detail' post.article.id %}" class="btn btn-primary">Read more</a>
                                        <button type="submit" class="btn btn-danger">Remove</button>
                                    </div>    
                                </form>
                                
                            </div>
                        </div>
                    {% empty %}
                        <div class="col">
                            <div class="text-center mt-5" style="width: 150%;">

                                <h5 class="text-warning">Nothing to see</h5>
                                <p class="card-text text-muted">Add items to Favorites!</p>
                            </div>
                        </div>
                    {% endfor%}
                </div>                

            </div>
            <div class="col-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{user.names|capfirst}} {{user.last_name|capfirst}}</h5>
                        <p class="card-text">
                        <small class="text-muted">Occupation: </small>{{user.occupation|capfirst}}
                        </p>
                        <p class="card-text">
                        <small class="text-muted">Email: </small>{{user.email}}
                        </p>
                        <p class="card-text">
                        <small class="text-muted">Born: </small>{{user.date_of_birth}}
                        </p>
                        <p class="card-text"><small class="text-muted">Since: {{user.created}}</small></p>
                    </div>
                    <div class="card-footer text-center">
                        <a href="{% url 'users_app:userPasswordUpdate' %}" class="btn btn-primary">Change Password</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- paginator -->

        <!-- <div class="row pt-4">
            {% if not page_obj %}
                <p>No Existe paginacion</p>
            {% endif %}
            <div class='col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2'></div>
            <div class='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8'>
                <nav aria-label="pagination">
                    <ul class="pagination pagination-sm justify-content-center">
                        {% if page_obj.has_previous %}
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="?page=1" tabindex="-1">&laquo;</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="?page={{page_obj.previous_page_number}}" tabindex="-1">Anterior</a>
                            </li>
                        {% elif page_obj.number == 1  %}
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="" tabindex="-1">&laquo;</a>
                            </li>
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href="" tabindex="-1">Anterior</a>
                            </li>
                        {%endif%}
        
                        <li class="page-item active">
                            <a class="page-link navbar-dark">{{page_obj.number}} de {{page_obj.paginator.num_pages}}<span class="sr-only"></span></a>
                        </li>
        
                        {% if page_obj.has_next %}
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href='?page={{page_obj.next_page_number}}'> Siguiente</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link navbar-dark bg-dark border border-dark" href='?page={{page_obj.paginator.num_pages}}'>&raquo;</a>
                            </li>
                        {% elif not page_obj.has_next %}
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href=''> Siguiente</a>
                            </li>
                            <li class="page-item disabled">
                                <a class="page-link navbar-dark bg-dark border border-dark" href=''>&raquo;</a>
                            </li>
                        {%endif%}
        
        
                    </ul>
                </nav>
            </div>
            <div class='col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2'></div>
        </div> -->
    </div>
    
    

    {% include 'includes/footer.html' %}

{% endblock content %}